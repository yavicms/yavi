!function r(i,o,a){function u(n,e){if(!o[n]){if(!i[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);throw new Error("Cannot find module '"+n+"'")}e=o[n]={exports:{}};i[n][0].call(e.exports,function(e){var t=i[n][1][e];return u(t||e)},e,e.exports,r,i,o,a)}return o[n].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";n.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},t=t||{},r=e.split(c),i=t.decode||l,o=0;o<r.length;o++){var a,u=r[o],s=u.indexOf("=");s<0||(a=u.substr(0,s).trim(),'"'==(s=u.substr(++s,u.length).trim())[0]&&(s=s.slice(1,-1)),null==n[a]&&(n[a]=function(t,e){try{return e(t)}catch(e){return t}}(s,i)))}return n},n.serialize=function(e,t,n){var n=n||{},r=n.encode||o;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");r=r(t);if(r&&!a.test(r))throw new TypeError("argument val is invalid");var i=e+"="+r;if(null!=n.maxAge){t=+n.maxAge;if(isNaN(t)||!isFinite(t))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(t)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");i+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(i+="; HttpOnly");n.secure&&(i+="; Secure");if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i};var l=decodeURIComponent,o=encodeURIComponent,c=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},{}],2:[function(e,t,n){"use strict";e("./lib"),e("./lib/ajax"),e("./lib/prototype"),e("./lib/view"),e("./inc/modal")},{"./inc/modal":3,"./lib":6,"./lib/ajax":4,"./lib/prototype":7,"./lib/view":10}],3:[function(e,t,n){"use strict";var i=document.createElement("div");i.count=0,i.id="modal-location",document.getElementById("app").append(i);window.Modal=function(t){var n,r,e;return(t=t||{}).id="modal"+i.count++,n=View('\n<form class="modal :: this.class ::" action="#">\n    <input id=":: id ::" name="toggle" type="checkbox" />\n    <label for=":: id ::" class="overlay"></label>\n    <article>\n        :: if(this.title){ ::\n            <header>\n                <h3>:: title ::</h3>\n                <label for=":: id ::" class="close">&times;</label>\n            </header>\n            <section class="content">:: this.content ::</section>\n            <footer>\n                <button type="submit" class="button">:: this.btn_ok || "OK" ::</button>\n                <label for=":: id ::" class="button dangerous">\n                    :: this.btn_cancel || "Cancel" ::\n                </label>\n            </footer>\n        :: }else{ ::\n            <section class="content">:: this.content ::</section>\n        :: } ::\n    </article>\n</form>\n',t),(r=n.toggle).onchange=function(){!r.checked&&t.cancel?t.cancel(n):r.checked=!1},n.onsubmit=function(e){e.preventDefault(),r.checked&&t.ok?t.ok(n):r.checked=!1},{get show(){return function(){e||(e=1,View.render(i,n)),r.checked=!0}},get hide(){return function(){r.checked=!1}},get remove(){return function(){r.checked=!1,setTimeout(function(){n.remove(),0},1e3)}}}}},{}],4:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function a(e,t,n){(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function u(e){e=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===i(e)?e:String(e)}var r=new DOMParser,s=e("yavi/lib").is,l=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");a(this,"$options",{method:"GET",headers:{"Content-Type":"application/json","X-Yavi-Type":"json"}}),a(this,"$defines",{type:"json",action:"json"}),a(this,"$a",document.createElement("a")),"object"===i(e)&&Object.assign(this,e),this.$x=fetch(this.$a.href,this.$options)}var e,n,r;return e=t,(n=[{key:"method",set:function(e){this.$options.method=e.toUpperCase()}},{key:"headers",set:function(e){Object.assign(this.$options.headers,e)}},{key:"url",set:function(e){this.$a.href=e}},{key:"type",set:function(e){switch(e){case"json":this.$options.headers["X-Yavi-Type"]="json",this.$options.headers["Content-Type"]="application/json";break;case"text":case"html":this.$options.headers["X-Yavi-Type"]="html",this.$options.headers["Content-Type"]="text/plain"}}},{key:"query",set:function(e){switch(s(e)){case"string":this.$a.search=e;break;case"object":var n=[this.$a.search];loop(e,function(e,t){return n.push("".concat(t,"=").concat(e))}),this.$a.search=n.join("&")}}},{key:"body",set:function(e){"object"===i(e)&&(this.type="json",this.$options.body=JSON.stringify(e))}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.defineProperties(l,{text:{writable:!1,value:function(e,t){return t.url=e,t.type="text",t.method="get",new l(t).$x.then(function(e){return e.text()})}},html:{writable:!1,value:function(e,t){return t.url=e,t.type="html",t.method="get",new l(t).$x.then(function(e){return e.text()}).then(function(e){return r.parseFromString(e,"text/html")})}},json:{writable:!1,value:function(e,t){return t.url=e,t.type="json",new l(t).$x.then(function(e){return e.json()}).then(function(e){if("success"===e.type)return e;throw e})}},get:{writable:!1,value:function(e,t,n){return l.json(e,{query:t,headers:n,method:"get"})}},put:{writable:!1,value:function(e,t,n){return l.json(e,{body:t,headers:n,method:"put"})}},post:{writable:!1,value:function(e,t,n){return l.json(e,{body:t,headers:n,method:"post"})}},delete:{writable:!1,value:function(e,t,n){return l.json(e,{body:t,headers:n,method:"delete"})}},upload:{writable:!1,value:function(e,t,n){}},download:{writable:!1,value:function(){}}}),Object.defineProperty(window,"ajax",{writable:!1,value:l})},{"yavi/lib":15}],5:[function(e,t,n){"use strict";var r=e("yavi/lib/loop"),o=e("cookie").parse(document.cookie),e={};function i(e,t,n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),r="expires="+r.toUTCString(),document.cookie=e+"="+t+";"+r+";path=/",0<n?o[e]=t:delete o[e]}Object.defineProperties(e,{$days:{writable:!0,value:7},time:{writable:!1,value:function(e){return"number"==typeof e&&(this.$days=e),this}},set:{writable:!1,value:function(e,t){var n=this.$days;return 2===arguments.length&&"string"==typeof e?i(e,t,n):r(e,function(e,t){i(t,e,n)}),this}},get:{writable:!1,value:function(e){return o[e]}},has:{writable:!1,value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(e){return void 0===o[e]})}},remove:{writable:!1,value:function(){var e=new Date;e.setTime(e.getTime()+-864e5);for(var t="expires="+e.toUTCString(),n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return r.forEach(function(e){delete o[e],document.cookie=e+"=;"+t+";path=/"}),this}}}),t.exports=e},{cookie:1,"yavi/lib/loop":17}],6:[function(e,t,n){"use strict";var r=e("./ws"),o=e("yavi/lib/is"),i={},a=[],u={};function s(e){var t=document.createElement("a");return t.href=e,t}Object.defineProperties(window,{yavi:{writable:!1,value:e("yavi/lib")},WS:{writable:!1,value:function(e,t){return e=s(e=e||document.location.origin).href,i[e]||(i[e]=new r(e.replace(/^http/,"ws"),t)),i[e]}},spa:{writable:!1,value:function(e,t,n){return e.html(t).then(function(e){return Promise.all([document.title=e.title,history.pushState(null,null,t),load_page(t),n&&n(e),yavi.emit("spa",e)])})}},load_page:{writable:!1,value:function(e,t){Promise.all(a.map(function(e){return e()}));var e=s(e),n=u[e.pathname];n&&Promise.all(n.map(function(e){return e()})),t&&t(e.href)}},cookie:{writable:!1,value:e("./cookie")},page:{writable:!1,value:function(){switch(o(arguments[0])){case"string":var e=s(arguments[0]).pathname;"function"==typeof(n=arguments[1])&&(u[e]||(u[e]=[]),u[e].push(n));break;case"function":a.push(arguments[0]);break;case"array":var t=arguments[0],n=arguments[1];if("function"==typeof n)for(var r=0,i=t.length;r<i;r++)e=s(t[r]).pathname,u[e]||(u[e]=[]),u[e].push(n)}}}});var l=new yavi.Event;window.onpopstate=function(e){l.emit("popstate",e)},Object.defineProperties(window.yavi,{on:{writable:!1,value:function(e,t){l.on(e,t)}},emit:{writable:!1,value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];l.emit.apply(l,[e].concat(n))}}})},{"./cookie":5,"./ws":11,"yavi/lib":15,"yavi/lib/is":16}],7:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=e("yavi/lib/event"),o=e("./view"),a=e("./view-hook");Object.defineProperties(HTMLElement.prototype,{html:{writable:!1,value:function(e){switch(r(e)){case"undefined":return this.innerHTML;case"string":case"number":this.innerHTML=e;break;case"object":e.nodeType&&(this.innerHTML="",this.append(e))}return this}},text:{writable:!1,value:function(e){switch(r(e)){case"undefined":return this.innerText;case"string":case"number":this.innerText=e;break;case"object":e.nodeType&&(this.innerText=e.innerText)}return this}},val:{writable:!1,value:function(e){return void 0===e?this.value:(this.value=e,this)}},css:{writable:!1,value:function(e,t){switch(r(e)){case"object":for(var n in e)this.style[n]=e[n];break;case"string":if(!t)return this.style[e];this.style[e]=t}return this}},toggle:{writable:!1,value:function(){this.style.display="none"===this.style.display?"":"none"}},show:{writable:!1,value:function(){return this.style.display="",this}},hide:{writable:!1,value:function(){return this.style.display="none",this}},toggleClass:{writable:!1,value:function(e){return this.classList.contains(e)?this.classList.remove(e):this.classList.add(e),this}},addClass:{writable:!1,value:function(e){return this.classList.add(e),this}},removeClass:{writable:!1,value:function(e){return this.classList.remove(e),this}},changeClass:{writable:!1,value:function(e,t){return this.classList.replace(e,t),this}},attr:{writable:!1,value:function(e,t){switch(r(e)){case"object":for(var n in e)this.setAttribute(n,t);break;case"string":if(void 0===t)return this.getAttribute(e);this.setAttribute(e,t)}return this}},__events:{writable:!1,value:new i},on:{writable:!1,value:function(e,t){return this.__events.on(e,t),this}},emit:{writable:!1,value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.__events.emit.apply(this.__events,t)}},hook:{writable:!1,value:function(e){return a(this,".hook-"+e)}},prev:{get:function(){return this.previousSibling}},next:{get:function(){return this.nextSibling}},parent:{writable:!1,value:function(e){return e?this.closest(e):this.parentNode}},find:{writable:!1,value:function(e){switch(r(e)){case"number":return[this.childNodes[e]];case"string":return this.querySelectorAll(e)}}},findOne:{writable:!1,value:function(e){switch(r(e)){case"number":return this.childNodes[e];case"string":return this.querySelector(e)}}},copy:{writable:!1,value:function(e){return o(this.__text,e||this.__props,this.__callback)}}})},{"./view":10,"./view-hook":9,"yavi/lib/event":12}],8:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function a(e,t,n){(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function u(e){e=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===i(e)?e:String(e)}var e=e("yavi/lib"),s=e.loop,l=e.$notext,c=e.Event,f=function(){function t(e){var n;if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");a(this,"$hooks",{}),a(this,"$cookie",cookie),a(this,"$events",new c),"object"===i(e)&&(n=this,s(e,function(e,t){"object"===i(e)&&e.__ishook?n.$hooks[t]=e:n[t]=e}))}var e,n,r;return e=t,(n=[{key:"hook",value:function(e){return this.$hooks[e]?'<span class="hook-'+e+'" style="display:none;"></span>':l}},{key:"callback",value:function(t){var n=this;"function"==typeof t&&this.$events.on("name",function(e){return t.call(e,n)})}},{key:"_emit",value:function(e){this.$events.emit("name",e)}}])&&o(e.prototype,n),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();Object.defineProperties(f,{html:{writable:!1,value:function(e,t){try{return new Function("YaviData",function(e){for(var t,n=/::(.+?)::/g,r=/(^( )?(var|if|for|else|elseif|switch|case|break|default|\:|\{|\}|\(|\)|\+|\-|\*|\\))(.*)?/g,i="with(YaviData){ var $=[];",o=0,a=function e(t,n){return i+=n?t.match(r)?t:"$.push("+t+");":t!=l?"$.push('"+t.replace(/'/g,"&#39")+"');":l,e};t=n.exec(e);)a(e.slice(o,t.index))(t[1],!0),o=t.index+t[0].length;return a(e.substr(o,e.length-o)),i+";return $.join('');};"}(e)).call(t,t)}catch(e){return console.log(e),l}}},map:{writable:!1,map:function(e,t){var n,i,o=[];for(i in e)(n=t(e[i],i))&&o.push(n);return r.join(l)}}}),Object.defineProperties(f.prototype,{map:{writable:!1,value:function(e,t){return f.map(e,t)}},lang:{writable:!1,value:function(e){return lang(e)}}}),t.exports=f},{"yavi/lib":15}],9:[function(e,t,n){"use strict";function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,u=[],s=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=o.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){l=!0,i=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return u}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=e("yavi/lib").loop;t.exports=function(n,r){return{get append(){return function(e){n.emit(r,e,"append")}},get prepend(){return function(e){n.emit(r,e,"prepend")}},get remove(){return function(e){n.emit(r,e,"remove")}},get set(){return function(e){n.emit(r,e,"replace")}},get emit(){return function(){for(var e=arguments.length,i=new Array(e),t=0;t<e;t++)i[t]=arguments[t];n.emit(r).then(function(e){a(e,function(e){for(var e=o(e,2),t=e[0],n=e[1],r=t.nextSibling;r!==n;)r.emit.apply(r,i),r=r.nextSibling})})}}}}},{"yavi/lib":15}],10:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=new DOMParser,a=e("./view-data"),s=e("yavi/lib").$notext;function l(e,t,n){e=e.replace(/[\n\r\t]+/g,s).replace(/\s{2,}/g,s);var r=new a(t),i=a.html(e,r),u=o.parseFromString(i,"text/html").body.childNodes[0];return u.__text=e,u.__callback=n,u.__props=t,u.__ishook=1,r.__hooks&&loop(r.__hooks,function(o,e){var n,a=".hook-"+e;loop(u.querySelectorAll(a),function(e){var t=document.createDocumentFragment(),r=document.createComment("start"),i=document.createComment("end");n=n?l(o.__text,o.__props,o.__callback):o,t.append(r),t.append(n),t.append(i),u.on(a,function(e,t){if(!arguments.length)return[r,i];switch(e=e||o.__props,t){case"append":u.insertBefore(l(o.__text,e,o.__callback),i);break;case"prepend":u.insertBefore(l(o.__text,e,o.__callback),r.nextSibling);break;case"remove":for(var n=r.nextSibling;n!==i;)n.remove(),n=r.nextSibling;break;default:for(n=r.nextSibling;n!==i;)n.remove(),n=r.nextSibling;u.insertBefore(l(o.__text,e,o.__callback),i)}}),u.insertBefore(t,e),e.remove()})}),r._emit(u),n&&n(u),u}Object.defineProperty(l,"render",{writable:!1,value:function(e,t){switch(r(e)){case"string":e=document.querySelector(e);case"object":e.innerHTML=s,e.append(t)}}}),window.View=l},{"./view-data":8,"yavi/lib":15}],11:[function(e,t,n){"use strict";var o,a,u,s,l,c,f,p,h,v;function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==y(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===y(e)?e:String(e)}(r.key),r)}}function b(e,t){i(e,t),t.add(e)}function m(e,t,n){i(e,t),t.set(e,n)}function i(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t,n){if(t.has(e))return n;throw new TypeError("attempted to get private field on non-instance")}function w(e,t){t=k(e,t,"get");return t.get?t.get.call(e):t.value}function g(e,t,n){t=k(e,t,"set");if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function k(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var e=e("yavi/lib"),S=e.is,j=e.qs,x=e.Event,_=new DOMParser,T=new RegExp("^/(public|favicon)");function $(t){var e;t[2]?"function"==typeof(e=w(this,u)[t[0]])&&e(t[1]):(e=w(this,a)[t[0]]).length&&e.forEach(function(e){return e(t[1])})}function O(e,t,n){var r=0;return"function"==typeof n&&(w(this,u)[e]=n,r=1),[e,t,r]}function P(e){var r=this,i=JSON.stringify(e);setTimeout(function e(){var t,n;w(r,c)?w(r,s).length?(w(r,s).forEach(function(e){return w(r,l).send(e)}),g(r,s,[])):(g(r,f,(t=w(r,f),n=t++,t)),100<n?clearTimeout(e):w(r,l).send(i)):(w(r,s).push(i),setTimeout(e,10))})}t.exports=(o=new WeakMap,a=new WeakMap,u=new WeakMap,s=new WeakMap,l=new WeakMap,c=new WeakMap,f=new WeakMap,p=new WeakSet,h=new WeakSet,v=new WeakSet,function(){function i(e,t,n){var r=this;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");b(this,v),b(this,h),b(this,p),m(this,o,{writable:!0,value:new x}),m(this,a,{writable:!0,value:{}}),m(this,u,{writable:!0,value:{}}),m(this,s,{writable:!0,value:[]}),m(this,l,{writable:!0,value:null}),m(this,c,{writable:!0,value:!1}),m(this,f,{writable:!0,value:0}),g(this,l,new WebSocket(e,t,n)),w(this,l).onmessage=function(e){return d(r,p,$).call(r,JSON.parse(e.data))},w(this,l).onopen=function(e){r.connected(!0),w(r,o).emit("open",e)},w(this,l).onerror=function(e){r.connected(!1),w(r,o).emit("error",e)},w(this,l).onclose=function(e){r.connected(!1),w(r,o).emit("close",e)}}var e,t,n;return e=i,(t=[{key:"connected",value:function(e){if(void 0===e)return w(this,c);g(this,c,e)}},{key:"open",value:function(e){w(this,o).on("open",e)}},{key:"error",value:function(e){w(this,o).on("error",e)}},{key:"close",value:function(e){w(this,o).on("close",e)}},{key:"emit",value:function(e,t,n){d(this,v,P).call(this,d(this,h,O).call(this,e,t,n))}},{key:"on",value:function(e,t){w(this,a)[e]||(w(this,a)[e]=[]),w(this,a)[e].push(t)}},{key:"html",value:function(e,r){var i=this;return new Promise(function(t,n){return i.request({path:e,body:r,method:"get",type:"html",success:function(e){"string"==typeof e?t(_.parseFromString(e,"text/html")):n()},error:n})})}},{key:"json",value:function(){var e,r=this;switch(arguments.length){case 1:S.object(arguments.length<=0?void 0:arguments[0])&&(e=arguments.length<=0?void 0:arguments[0]);break;case 2:e={path:arguments.length<=0?void 0:arguments[0],body:arguments.length<=1?void 0:arguments[1],method:"get"};break;case 3:e={method:arguments.length<=0?void 0:arguments[0],path:arguments.length<=1?void 0:arguments[1],body:arguments.length<=2?void 0:arguments[2]}}return e?new Promise(function(t,n){return r.request(Object.assign(e,{type:"json",success:function(e){"object"===y(e)?t(e):n()},error:n}))}):Promise.reject()}},{key:"request",value:function(e){var t,n;"object"!==y(e)||T.test(e.path)||(t=document.createElement("a"),n=e.success,t.href=e.path,e.path=t.pathname,e.query=j(t.search),e.method||(e.method="get"),e.type||(e.type="json"),this.emit("http.request",e,n))}},{key:"httpRequest",value:function(n,r,i){var o=this;return new Promise(function(e,t){return o.request({type:"json",method:n,path:r,body:i,success:e,error:t})}).then(function(e){if("success"===e.type)return e;throw e})}},{key:"get",value:function(e,t,n){return this.httpRequest("get",e,t,n)}},{key:"put",value:function(e,t,n){return this.httpRequest("put",e,t,n)}},{key:"post",value:function(e,t,n){return this.httpRequest("post",e,t,n)}},{key:"delete",value:function(e,t,n){return this.httpRequest("delete",e,t,n)}},{key:"api",value:function(n,r,i,o){var a=this;return new Promise(function(e,t){return a.request({headers:o,method:n,body:i,success:e,error:t,path:"/api/"+r})})}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}())},{"yavi/lib":15}],12:[function(e,t,n){"use strict";function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===i(e)?e:String(e)}(r.key),r)}}function u(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function s(e,t,n){t=r(e,t,"set");if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function l(e,t){t=r(e,t,"get");return t.get?t.get.call(e):t.value}function r(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}t.exports=(o=new WeakMap,function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");u(this,o,{writable:!0,value:{}})}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){l(this,o)[e]||(l(this,o)[e]=[]),l(this,o)[e].push(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=l(this,o)[e]||[];return Promise.all(e.map(function(e){return e.apply(void 0,n)}))}},{key:"loop",value:function(e){for(var t in l(this,o))if(e(l(this,o)[t],t))break}},{key:"get",value:function(e){return l(this,o)[e]||[]}},{key:"remove",value:function(e){delete l(this,o)[e]}},{key:"reset",value:function(){s(this,o,{})}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())},{}],13:[function(e,t,n){"use strict";var u=e("./is");t.exports=function(e,t){var n;switch(u(e)){case"array":for(var r=[],i=0,o=e.length;i<o;i++)(n=t(e[i],i))&&r.push(n);break;case"object":for(var a in r={},e)(n=t(e[a],a))&&(r[a]=n)}return r}},{"./is":16}],14:[function(e,t,n){"use strict";var a=e("./is");t.exports=function(e,t){var n;switch(a(e)){case"array":for(var r=0,i=e.length;r<i&&!(n=t(e[r],r));r++);break;case"object":for(var o in e)if(n=t(e[o],o))break}return n}},{"./is":16}],15:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e=[["menu",e("./menu")],["find",e("./find")],["findOne",e("./findOne")],["loop",e("./loop")],["remove",e("./remove")],["map",e("./map")],["is",e("yavi/lib/is")],["qs",e("yavi/lib/query-string")],["Event",e("yavi/lib/event")],["copy",function(e){return"object"===o(e)?JSON.parse(JSON.stringify(e)):e}],["assign",function(e,t){return Object.assign(e,t)}],["user_validate",e("./user-validate")],["$notext",""]],a=i(function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")});e.forEach(function(e){return Object.defineProperty(a,e[0],{writable:!1,value:e[1]})}),t.exports=a},{"./find":13,"./findOne":14,"./loop":17,"./map":18,"./menu":19,"./remove":21,"./user-validate":22,"yavi/lib/event":12,"yavi/lib/is":16,"yavi/lib/query-string":20}],16:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){var n=r(e);return"object"===n&&void 0!==e.length?t?"array"===t:"array":t?t===n:n}["string","number","undefined","boolean","object","array","function"].forEach(function(t){return Object.defineProperty(i,t,{writable:!1,value:function(e){return i(e,t)}})}),[["email",function(e){return"string"==typeof e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}],["phone",function(e){return"string"==typeof e&&/^\d{9,15}$/.test(e)}],["password",function(e){return"string"==typeof e&&/^[^\t\n]{8,200}$/.test(e)}],["plugin",function(e){return/(plugin|theme|admin)[a-zA-Z0-9\-]+/.test(e)}],["limit",function(e){return"number"==typeof e&&0<e}]].forEach(function(e){return Object.defineProperty(i,e[0],{writable:!1,value:e[1]})}),t.exports=i},{}],17:[function(e,t,n){"use strict";var i=e("./is");t.exports=function(e,t){switch(i(e)){case"array":for(var n=0,r=e.length;n<r&&!t(e[n],n);n++);break;case"object":for(var n in e)if(t(e[n],n))break}}},{"./is":16}],18:[function(e,t,n){"use strict";var u=e("./is");t.exports=function(e,t){switch(u(e)){case"array":for(var n=[],r=0,i=e.length;r<i;r++)n.push(t(e[r]));break;case"object":for(var o in n={},e){var a=t(e[o],o);void 0!==a&&(n[o]=a)}}return n}},{"./is":16}],19:[function(e,t,n){"use strict";var u=e("yavi/lib/is");t.exports=function e(t,n,r,i){var o,a=[];if(void 0===i){if(r=0,!u.array(t))return a;i=t.length}for(;r<i;r++)(o=t[r]).parent==n&&(o.children=e(t,o.name,r,i),a.push(o));return a}},{"yavi/lib/is":16}],20:[function(e,t,n){"use strict";function r(e){var t={},e=e.split("?")[1];if(e)for(var n,r=0,i=(n=decodeURIComponent(e).split(/[=&]/)).length;r<i;r++)t[n[r]]=n[++r];return t}r.string=function(e){var t=[];if(e)for(var n in e)t.push([n,e[n]].join("="));return"?"+t.join("&")},t.exports=r},{}],21:[function(e,t,n){"use strict";var i=e("yavi/lib/is");t.exports=function(e,t){switch(i(e)){case"array":for(var n=0,r=e.length;n<r;n++)if(t(e[n],n)){e.splice(n,1);break}break;case"object":for(var n in e)if(t(e[n],n)){delete e[n];break}}}},{"yavi/lib/is":16}],22:[function(e,t,n){"use strict";var r=/^[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~](\.?[-!#$%&'*+\/0-9=?A-Z^_a-z`{|}~])*@[a-zA-Z0-9](-*\.?[a-zA-Z0-9])*\.[a-zA-Z](-?[a-zA-Z0-9])+$/,l={},c=e("./loop");Object.defineProperties(l,{username:{writable:!1,value:{error:"error_username",value:function(e){if("string"==typeof e&&e.length<100&&(e=e.trim(),/^([a-zA-Z0-9\.]{5,})$/.test(e)))return{k:"username",v:e}}}},email:{writable:!1,value:{error:"error_email",value:function(e){if("string"==typeof e){var t,n=(e=e.trim()).split("@");if(2===n.length&&((t=n[1].split(".")).push(n[0]),t.some(function(e){return e.length<63}))&&r.test(e))return{k:"email",v:e}}}}},phone:{writable:!1,value:{error:"error_phone",value:function(e){if("string"==typeof e&&e.length<15&&(e=e.trim(),/^([0-9]{9,})$/.test(e)))return{k:"phone",v:e}}}},password:{writable:!1,value:{error:"error_password",value:function(e){if("string"==typeof e&&e.length<200&&(e=e.replace(/^\s/g,"").replace(/\s$/g,""),/^[^\n\r\t]{8,}$/.test(e)))return{k:"password",v:e}}}},code:{writable:!1,value:{error:"error_code",value:function(e){if("string"==typeof e&&(e=e.replace(/^\s/g,"").replace(/\s$/g,""),/^[0-9]{6}$/.test(e)))return{k:"code",v:e}}}},fullname:{writable:!1,value:{error:"error_name",value:function(e,t){if("string"==typeof e&&e.length&&(e=e.replace(/\s{2,}/g," ").trim(),/^[a-z]{2,50}$/.test(e.replace(/\s/g,"").toLowerCase().replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a").replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e").replace(/ì|í|ị|ỉ|ĩ/g,"i").replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o").replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u").replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y").replace(/đ/g,"d"))))return{k:t,v:e}}}},gender:{writable:!1,value:{error:"error_gender",value:function(e){switch(e){case 0:case 1:return{k:"gender",v:e};case"0":case"1":return{k:"gender",v:Number(e)}}}}}}),Object.defineProperties(l,{login:{writable:!1,value:{error:"error_login",value:function(e){return l.email.value(e)||l.phone.value(e)||l.username.value(e)}}},firstname:{writable:!1,value:l.fullname},lastname:{writable:!1,value:l.fullname}}),t.exports=function(u,s){return new Promise(function(e,t){var n,r,i,o={},a={};c(s,function(e){return(n=l[e])?(i=n.value(u[e],e))?(o[e]=i.k,void(a[i.k]=i.v)):(r={name:e,message:n.error},1):(r={name:e,message:"arror_"+e},1)}),r?t(r):e({keys:o,values:a})})}},{"./loop":17}]},{},[2]);