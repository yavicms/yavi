!function r(o,i,a){function u(n,e){if(!i[n]){if(!o[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);throw new Error("Cannot find module '"+n+"'")}e=i[n]={exports:{}};o[n][0].call(e.exports,function(e){var t=o[n][1][e];return u(t||e)},e,e.exports,r,o,i,a)}return i[n].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){"use strict";n.parse=function(e,t){if("string"!=typeof e)throw new TypeError("argument str must be a string");for(var n={},t=t||{},r=e.split(l),o=t.decode||c,i=0;i<r.length;i++){var a,u=r[i],s=u.indexOf("=");s<0||(a=u.substr(0,s).trim(),'"'==(s=u.substr(++s,u.length).trim())[0]&&(s=s.slice(1,-1)),null==n[a]&&(n[a]=function(t,e){try{return e(t)}catch(e){return t}}(s,o)))}return n},n.serialize=function(e,t,n){var n=n||{},r=n.encode||i;if("function"!=typeof r)throw new TypeError("option encode is invalid");if(!a.test(e))throw new TypeError("argument name is invalid");r=r(t);if(r&&!a.test(r))throw new TypeError("argument val is invalid");var o=e+"="+r;if(null!=n.maxAge){t=+n.maxAge;if(isNaN(t)||!isFinite(t))throw new TypeError("option maxAge is invalid");o+="; Max-Age="+Math.floor(t)}if(n.domain){if(!a.test(n.domain))throw new TypeError("option domain is invalid");o+="; Domain="+n.domain}if(n.path){if(!a.test(n.path))throw new TypeError("option path is invalid");o+="; Path="+n.path}if(n.expires){if("function"!=typeof n.expires.toUTCString)throw new TypeError("option expires is invalid");o+="; Expires="+n.expires.toUTCString()}n.httpOnly&&(o+="; HttpOnly");n.secure&&(o+="; Secure");if(n.sameSite)switch("string"==typeof n.sameSite?n.sameSite.toLowerCase():n.sameSite){case!0:o+="; SameSite=Strict";break;case"lax":o+="; SameSite=Lax";break;case"strict":o+="; SameSite=Strict";break;case"none":o+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return o};var c=decodeURIComponent,i=encodeURIComponent,l=/; */,a=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/},{}],2:[function(e,t,n){"use strict";e("yavi/dom"),e("yavi/dom/lib/ajax"),e("yavi/dom/lib/prototype"),e("yavi/dom/lib/view"),e("./lib/modal")},{"./lib/modal":3,"yavi/dom":4,"yavi/dom/lib/ajax":5,"yavi/dom/lib/prototype":8,"yavi/dom/lib/view":11}],3:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=document.createElement("div");u.count=0,u.id="modal-location",document.querySelector(".app").append(u),window.Modal=function(t){(t=t||{}).id="modal"+u.count++,t.btn_ok||(t.btn_ok="OK"),t.btn_cancel||(t.btn_cancel="Cancel"),t.class||(t.class="");var e,n={props:t,content:t.content,_ishook:"object"===a(t.content)},r=View('\n<form class="modal {% props.class %}" action="#">\n    <input id="{% props.id %}" name="toggle" type="checkbox" />\n    <label for="{% props.id %}" class="overlay"></label>\n    <article>\n        {% if(props.title){ %}\n            <header>\n                <h3>{% props.title %}</h3>\n                <label for="{% props.id %}" class="close">&times;</label>\n            </header>\n            <section class="content">{% props.content %}</section>\n            <footer>\n                <button type="submit" class="button">{% props.btn_ok %}</button>\n                <label for="{% props.id %}" class="button dangerous">\n                    {% props.btn_cancel %}\n                </label>\n            </footer>\n        {% }else{ %}\n            <section class="content">{% _ishook ? hook(\'content\') : props.content %}</section>\n        {% } %}\n    </article>\n</form>\n    ',n),o=r.toggle,i={get show(){return function(){e||(e=1,View.render(r,u)),o.checked=!0}},get hide(){return function(){o.checked=!1}},get remove(){return function(){o.checked=!1,setTimeout(function(){r.remove(),i=null},1e3)}}};return r.toggle.onchange=function(){!this.checked&&t.cancel?t.cancel(r):this.checked=!1},r.onsubmit=function(e){e.preventDefault(),r.toggle.checked&&t.ok?t.ok(r):this.checked=!1},i}},{}],4:[function(e,t,n){"use strict";e("./lib")},{"./lib":7}],5:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,u(r.key),r)}}function a(e,t,n){(t=u(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}function u(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}new DOMParser;var s=e("yavi/lib").is,r=function(){function n(e){var t=this;if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");a(this,"$options",{method:"GET",headers:{"Content-Type":"application/json","X-Yavi-Type":"json"}}),a(this,"$defines",{type:"json",action:"json"}),a(this,"$a",document.createElement("a")),"object"===o(e)&&Object.assign(this,e),this.$x=fetch(this.$a.href,this.$options).then(function(e){return e[t.$defines.action]()})}var e,t,r;return e=n,(t=[{key:"method",set:function(e){this.$options.method=e.toUpperCase()}},{key:"headers",set:function(e){Object.assign(this.$options.headers,e)}},{key:"url",set:function(e){this.$a.href=e}},{key:"type",set:function(e){switch(e){case"json":this.$defines.action="json",this.$options.headers["X-Yavi-Type"]="json",this.$options.headers["Content-Type"]="application/json";break;case"text":case"html":this.$defines.action="text",this.$options.headers["X-Yavi-Type"]="html",this.$options.headers["Content-Type"]="text/plain"}}},{key:"query",set:function(e){switch(s(e)){case"string":this.$a.search=e;break;case"object":var n=[this.$a.search];loop(e,function(e,t){return n.push("".concat(t,"=").concat(e))}),this.$a.search=n.join("&")}}},{key:"body",set:function(e){"object"===o(e)&&(this.type="json",this.$options.body=JSON.stringify(e))}}])&&i(e.prototype,t),r&&i(e,r),Object.defineProperty(e,"prototype",{writable:!1}),n}();Object.defineProperties(r,{text:{writable:!1,value:function(e,t){return t.url=e,t.type="text",t.method="get",new r(t).$x}},html:{writable:!1,value:function(e,t){return t.url=e,t.type="html",t.method="get",new r(t).$x}},json:{writable:!1,value:function(e,t){return t.url=e,t.type="json",new r(t).$x}},get:{writable:!1,value:function(e,t,n){return r.json(e,{query:t,headers:n,method:"get"})}},put:{writable:!1,value:function(e,t,n){return r.json(e,{body:t,headers:n,method:"put"})}},post:{writable:!1,value:function(e,t,n){return r.json(e,{body:t,headers:n,method:"post"})}},delete:{writable:!1,value:function(e,t,n){return r.json(e,{body:t,headers:n,method:"delete"})}}}),Object.defineProperty(window,"ajax",{writable:!1,value:r})},{"yavi/lib":16}],6:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o={},i=e("cookie").parse(document.cookie),a="=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";Object.defineProperties(o,{set:{writable:!1,value:function(e,t,n){var r=new Date;"number"!=typeof n&&(n=7),r.setTime(r.getTime()+24*n*60*60*1e3),n="expires="+r.toUTCString(),document.cookie=e+"="+t+";"+n+";path=/"}},get:{writable:!1,value:function(e){return i[e]}},has:{writable:!1,value:function(e){return 0<(i[e]||"").length}},remove:{writable:!1,value:function(e){switch(r(e)){case"string":document.cookie=e+a;break;case"object":e.length&&e.forEach(function(e){document.cookie=e+a})}}}}),t.exports=o},{cookie:1}],7:[function(e,t,n){"use strict";function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=e("./ws"),o={},u=[],s={};function c(e){var t=document.createElement("a");return t.href=e,t.href}Object.defineProperties(window,{yavi:{writable:!1,value:e("yavi/lib")},WS:{writable:!1,value:function(e,t){return e=(e=c(e=e||document.location.origin)).replace(/^http/,"ws"),o[e]||(o[e]=new r(e,t)),o[e]}},spa:{writable:!1,value:function(e,t,n){return e.html(t).then(function(e){return Promise.all([document.title=e.title,history.pushState(null,"",t),n&&n(e),load_page(t)])})}},load_page:{writable:!1,value:function(e){Promise.all(u.map(function(e){return e()})),(e=s[c(e)])&&Promise.all(e.map(function(e){return e()}))}},cookie:{writable:!1,value:e("./cookie")},page:{writable:!1,value:function(e,t){switch(a(e)){case"string":var n;"function"==typeof t&&(n=c(e),s[n]||(s[n]=[]),s[n].push(t));break;case"function":u.push(e);break;case"object":if("function"==typeof t&&e.length)for(var r=0,o=e.length;r<o;r++){var i=c(e[r]);s[i]||(s[i]=[]),s[i].push(t)}}}}})},{"./cookie":6,"./ws":12,"yavi/lib":16}],8:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var o=e("yavi/lib/event"),i=e("./view"),a=e("./view-hook");Object.defineProperties(HTMLElement.prototype,{html:{writable:!1,value:function(e){switch(r(e)){case"undefined":return this.innerHTML;case"string":case"number":this.innerHTML=e;break;case"object":e.nodeType&&(this.innerHTML="",this.append(e))}return this}},text:{writable:!1,value:function(e){switch(r(e)){case"undefined":return this.innerText;case"string":case"number":this.innerText=e;break;case"object":e.nodeType&&(this.innerText=e.innerText)}return this}},val:{writable:!1,value:function(e){return void 0===e?this.value:(this.value=e,this)}},css:{writable:!1,value:function(e,t){switch(r(e)){case"object":for(var n in e)this.style[n]=e[n];break;case"string":if(!t)return this.style[e];this.style[e]=t}return this}},toggle:{writable:!1,value:function(){this.style.display="none"===this.style.display?"":"none"}},show:{writable:!1,value:function(){return this.style.display="",this}},hide:{writable:!1,value:function(){return this.style.display="none",this}},toggleClass:{writable:!1,value:function(e){return this.classList.contains(e)?this.classList.remove(e):this.classList.add(e),this}},addClass:{writable:!1,value:function(e){return this.classList.add(e),this}},removeClass:{writable:!1,value:function(e){return this.classList.remove(e),this}},changeClass:{writable:!1,value:function(e,t){return this.classList.replace(e,t),this}},attr:{writable:!1,value:function(e,t){switch(r(e)){case"object":for(var n in e)this.setAttribute(n,t);break;case"string":if(void 0===t)return this.getAttribute(e);this.setAttribute(e,t)}return this}},__events:{writable:!1,value:new o},on:{writable:!1,value:function(e,t){return this.__events.on(e,t),this}},emit:{writable:!1,value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.__events.emit.apply(this.__events,t)}},hook:{writable:!1,value:function(e){return a(this,".hook-"+e)}},prev:{get:function(){return this.previousSibling}},next:{get:function(){return this.nextSibling}},parent:{writable:!1,value:function(e){return e?this.closest(e):this.parentNode}},find:{writable:!1,value:function(e){switch(r(e)){case"number":return[this.childNodes[e]];case"string":return this.querySelectorAll(e)}}},findOne:{writable:!1,value:function(e){switch(r(e)){case"number":return this.childNodes[e];case"string":return this.querySelector(e)}}},copy:{writable:!1,value:function(e){return i(this.__text,e||this.__props,this.__callback)}}})},{"./view":11,"./view-hook":10,"yavi/lib/event":13}],9:[function(e,t,n){"use strict";var o;function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function s(e){e=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===a(e)?e:String(e)}function c(e,t,n){if(e!==t)throw new TypeError("Private static access of wrong provenance");return n}var l=e("yavi/lib").loop;function f(e){function n(e,t){return i+=t?e.match(o)?e:"r.push("+e+");":""!=e?"r.push('"+e.replace(/'/g,"&#39")+"');":"",n}var t,r=/\{\%(.+?)\%\}/g,o=/(^( )?(var|if|for|else|elseif|switch|case|break|default|\:|\{|\}|\(|\)|\+|\-|\*|\\))(.*)?/g,i="with(YaviData){ var r=[];",a=0;for(e=e.replace(/[\n\r\t]/g,"");t=r.exec(e);)n(e.slice(a,t.index))(t[1],!0),a=t.index+t[0].length;return n(e.substr(a,e.length-a)),i+"return r.join('');}"}t.exports=o=function(){function i(e){var t,n,r,o;if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");t=this,r={},(n=s(n="__hooks"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,"object"===a(e)&&(o=this,l(e,function(e,t){"object"===a(e)&&e.__ishook?o.__hooks[t]=e:o[t]=e}))}var e,t,n;return e=i,n=[{key:"html",value:function(e,t){try{return new Function("YaviData",c(this,o,f).call(this,e))(t)}catch(e){return console.log(e),""}}},{key:"map",value:function(e,t){var n,o,i=[];for(o in e)(n=t(e[o],o))&&i.push(n);return r.join("")}}],(t=[{key:"hook",value:function(e){return this.__hooks[e]?'<span class="hook-'+e+'"></span>':""}},{key:"map",value:function(e,t){return i.map(e,t)}}])&&u(e.prototype,t),n&&u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}()},{"yavi/lib":16}],10:[function(e,t,n){"use strict";function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,u=[],s=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw o}}return u}}(e,t)||function(e,t){var n;if(e)return"string"==typeof e?r(e,t):"Map"===(n="Object"===(n=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var a=e("yavi/lib").loop;t.exports=function(n,r){return{get append(){return function(e){n.emit(r,e,"append")}},get prepend(){return function(e){n.emit(r,e,"prepend")}},get remove(){return function(e){n.emit(r,e,"remove")}},get set(){return function(e){n.emit(r,e,"replace")}},get emit(){return function(){for(var e=arguments.length,o=new Array(e),t=0;t<e;t++)o[t]=arguments[t];n.emit(r).then(function(e){a(e,function(e){for(var e=i(e,2),t=e[0],n=e[1],r=t.nextSibling;r!==n;)r.emit.apply(r,o),r=r.nextSibling})})}}}}},{"yavi/lib":16}],11:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=new DOMParser,a=e("./view-data"),s=e("yavi/lib").loop;function c(e,t,n){var r=new a(t),o=a.html(e,r),u=i.parseFromString(o,"text/html").body.childNodes[0];return u.__text=e,u.__callback=n,u.__props=t,u.__ishook=1,r.__hooks&&s(r.__hooks,function(i,e){var n,a=".hook-"+e;s(u.querySelectorAll(a),function(e){var t=document.createDocumentFragment(),r=document.createComment("start"),o=document.createComment("end");n=n?c(i.__text,i.__props,i.__callback):i,t.append(r),t.append(n),t.append(o),u.on(a,function(e,t){if(!arguments.length)return[r,o];switch(e=e||i.__props,t){case"append":u.insertBefore(c(i.__text,e,i.__callback),o);break;case"prepend":u.insertBefore(c(i.__text,e,i.__callback),r.nextSibling);break;case"remove":for(var n=r.nextSibling;n!==o;)n.remove(),n=r.nextSibling;break;default:for(n=r.nextSibling;n!==o;)n.remove(),n=r.nextSibling;u.insertBefore(c(i.__text,e,i.__callback),o)}}),u.insertBefore(t,e),e.remove()})}),n&&n(u),u}Object.defineProperty(c,"render",{writable:!1,value:function(e,t){switch(r(t)){case"string":document.querySelector(t).append(e);break;case"object":t.append(e)}}}),window.View=c},{"./view-data":9,"yavi/lib":16}],12:[function(e,t,n){"use strict";var i,a,u,s,c,l,f,p,y,h;function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===b(e)?e:String(e)}(r.key),r)}}function v(e,t){o(e,t),t.add(e)}function m(e,t,n){o(e,t),t.set(e,n)}function o(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function d(e,t,n){if(t.has(e))return n;throw new TypeError("attempted to get private field on non-instance")}function w(e,t){t=S(e,t,"get");return t.get?t.get.call(e):t.value}function g(e,t,n){t=S(e,t,"set");if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function S(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}var e=e("yavi/lib"),k=e.is,j=e.qs,x=e.Event,_=new DOMParser,T=new RegExp("^/(public|favicon)");function E(t){var e;t[2]?"function"==typeof(e=w(this,u)[t[0]])&&e(t[1]):(e=w(this,a)[t[0]]).length&&e.forEach(function(e){return e(t[1])})}function O(e,t,n){var r=0;return"function"==typeof n&&(w(this,u)[e]=n,r=1),[e,t,r]}function P(e){var r=this,o=JSON.stringify(e);setTimeout(function e(){var t,n;w(r,l)?w(r,s).length?(w(r,s).forEach(function(e){return w(r,c).send(e)}),g(r,s,[])):(g(r,f,(t=w(r,f),n=t++,t)),100<n?clearTimeout(e):w(r,c).send(o)):(w(r,s).push(o),setTimeout(e,10))})}t.exports=(i=new WeakMap,a=new WeakMap,u=new WeakMap,s=new WeakMap,c=new WeakMap,l=new WeakMap,f=new WeakMap,p=new WeakSet,y=new WeakSet,h=new WeakSet,function(){function o(e,t,n){var r=this;if(!(this instanceof o))throw new TypeError("Cannot call a class as a function");v(this,h),v(this,y),v(this,p),m(this,i,{writable:!0,value:new x}),m(this,a,{writable:!0,value:{}}),m(this,u,{writable:!0,value:{}}),m(this,s,{writable:!0,value:[]}),m(this,c,{writable:!0,value:null}),m(this,l,{writable:!0,value:!1}),m(this,f,{writable:!0,value:0}),g(this,c,new WebSocket(e,t,n)),w(this,c).onmessage=function(e){return d(r,p,E).call(r,JSON.parse(e.data))},w(this,c).onopen=function(e){r.connected(!0),w(r,i).emit("open",e)},w(this,c).onerror=function(e){r.connected(!1),w(r,i).emit("error",e)},w(this,c).onclose=function(e){r.connected(!1),w(r,i).emit("close",e)}}var e,t,n;return e=o,(t=[{key:"connected",value:function(e){if(void 0===e)return w(this,l);g(this,l,e)}},{key:"open",value:function(e){w(this,i).on("open",e)}},{key:"error",value:function(e){w(this,i).on("error",e)}},{key:"close",value:function(e){w(this,i).on("close",e)}},{key:"emit",value:function(e,t,n){d(this,h,P).call(this,d(this,y,O).call(this,e,t,n))}},{key:"on",value:function(e,t){w(this,a)[e]||(w(this,a)[e]=[]),w(this,a)[e].push(t)}},{key:"html",value:function(e,r){var o=this;return new Promise(function(t,n){return o.request({path:e,body:r,method:"get",type:"html",success:function(e){"string"==typeof e?t(_.parseFromString(e,"text/html")):n()},error:n})})}},{key:"json",value:function(){var e,r=this;switch(arguments.length){case 1:k.object(arguments.length<=0?void 0:arguments[0])&&(e=arguments.length<=0?void 0:arguments[0]);break;case 2:e={path:arguments.length<=0?void 0:arguments[0],body:arguments.length<=1?void 0:arguments[1],method:"get"};break;case 3:e={method:arguments.length<=0?void 0:arguments[0],path:arguments.length<=1?void 0:arguments[1],body:arguments.length<=2?void 0:arguments[2]}}return e?new Promise(function(t,n){return r.request(Object.assign(e,{type:"json",success:function(e){"object"===b(e)?t(e):n()},error:n}))}):Promise.reject()}},{key:"request",value:function(e){var t,n;"object"!==b(e)||T.test(e.path)||(t=document.createElement("a"),n=e.success,t.href=e.path,e.path=t.pathname,e.query=j(t.search),e.method||(e.method="get"),e.type||(e.type="json"),this.emit("http.request",e,n))}},{key:"httpRequest",value:function(n,r,o){var i=this;return new Promise(function(e,t){return i.request({type:"json",method:n,path:r,body:o,success:e,error:t})}).then(function(e){if("success"===e.type)return e.data;throw new Error(e)})}},{key:"get",value:function(e,t){return this.httpRequest("get",e,t)}},{key:"put",value:function(e,t){return this.httpRequest("put",e,t)}},{key:"post",value:function(e,t){return this.httpRequest("post",e,t)}},{key:"delete",value:function(e,t){return this.httpRequest("delete",e,t)}},{key:"api",value:function(n,r,o){var i=this;return new Promise(function(e,t){return i.request({method:n,body:o,success:e,error:t,path:"/api/"+r})})}}])&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}())},{"yavi/lib":16}],13:[function(e,t,n){"use strict";function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i;function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(r.key),r)}}function u(e,t,n){var r=e;if(t.has(r))throw new TypeError("Cannot initialize the same private elements twice on an object");t.set(e,n)}function s(e,t,n){t=r(e,t,"set");if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}function c(e,t){t=r(e,t,"get");return t.get?t.get.call(e):t.value}function r(e,t,n){if(t.has(e))return t.get(e);throw new TypeError("attempted to "+n+" private field on non-instance")}t.exports=(i=new WeakMap,function(){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");u(this,i,{writable:!0,value:{}})}var t,n,r;return t=e,(n=[{key:"on",value:function(e,t){c(this,i)[e]||(c(this,i)[e]=[]),c(this,i)[e].push(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=c(this,i)[e]||[];return Promise.all(e.map(function(e){return e.apply(null,n)}))}},{key:"remove",value:function(e){delete c(this,i)[e]}},{key:"reset",value:function(){s(this,i,{})}}])&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())},{}],14:[function(e,t,n){"use strict";var u=e("./is");t.exports=function(e,t){var n;switch(u(e)){case"array":for(var r=[],o=0,i=e.length;o<i;o++)(n=t(e[o],o))&&r.push(n);break;case"object":for(var a in r={},e)(n=t(e[a],a))&&(r[a]=n)}return r}},{"./is":17}],15:[function(e,t,n){"use strict";var a=e("./is");t.exports=function(e,t){var n;switch(a(e)){case"array":for(var r=0,o=e.length;r<o&&!(n=t(e[r],r));r++);break;case"object":for(var i in e)if(n=t(e[i],i))break}return n}},{"./is":17}],16:[function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==i(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===i(e)?e:String(e)}(r.key),r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var e=[["menu",e("./menu")],["find",e("./find")],["findOne",e("./findOne")],["loop",e("./loop")],["remove",e("./remove")],["map",e("./map")],["is",e("yavi/lib/is")],["qs",e("yavi/lib/query-string")],["Event",e("yavi/lib/event")],["copy",function(e){return"object"===i(e)?JSON.parse(JSON.stringify(e)):e}],["assign",function(e,t){return Object.assign(e,t)}]],a=o(function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function")});e.forEach(function(e){return Object.defineProperty(a,e[0],{writable:!1,value:e[1]})}),t.exports=a},{"./find":14,"./findOne":15,"./loop":18,"./map":19,"./menu":20,"./remove":22,"yavi/lib/event":13,"yavi/lib/is":17,"yavi/lib/query-string":21}],17:[function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){var n=r(e);return"object"===n&&void 0!==e.length?t?"array"===t:"array":t?t===n:n}["string","number","undefined","boolean","object","array","function"].forEach(function(t){return Object.defineProperty(o,t,{writable:!1,value:function(e){return o(e,t)}})}),[["email",function(e){return"string"==typeof e&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}],["phone",function(e){return"string"==typeof e&&/^\d{9,15}$/.test(e)}],["password",function(e){return"string"==typeof e&&/^[^\t\n]{8,200}$/.test(e)}],["plugin",function(e){return/(plugin|theme|admin)[a-zA-Z0-9\-]+/.test(e)}],["limit",function(e){return"number"==typeof e&&0<e}]].forEach(function(e){return Object.defineProperty(o,e[0],{writable:!1,value:e[1]})}),t.exports=o},{}],18:[function(e,t,n){"use strict";var o=e("./is");t.exports=function(e,t){switch(o(e)){case"array":for(var n=0,r=e.length;n<r&&!t(e[n],n);n++);break;case"object":for(var n in e)if(t(e[n],n))break}}},{"./is":17}],19:[function(e,t,n){"use strict";var u=e("./is");t.exports=function(e,t){switch(u(e)){case"array":for(var n=[],r=0,o=e.length;r<o;r++)n.push(t(e[r]));break;case"object":for(var i in n={},e){var a=t(e[i],i);void 0!==a&&(n[i]=a)}}return n}},{"./is":17}],20:[function(e,t,n){"use strict";var u=e("yavi/lib/is");t.exports=function e(t,n,r,o){var i,a=[];if(void 0===o){if(r=0,!u.array(t))return a;o=t.length}for(;r<o;r++)(i=t[r]).parent==n&&(i.children=e(t,i.name,r,o),a.push(i));return a}},{"yavi/lib/is":17}],21:[function(e,t,n){"use strict";function r(e){var t={},e=e.split("?")[1];if(e)for(var n,r=0,o=(n=decodeURIComponent(e).split(/[=&]/)).length;r<o;r++)t[n[r]]=n[++r];return t}r.string=function(e){var t=[];if(e)for(var n in e)t.push([n,e[n]].join("="));return"?"+t.join("&")},t.exports=r},{}],22:[function(e,t,n){"use strict";var o=e("yavi/lib/is");t.exports=function(e,t){switch(o(e)){case"array":for(var n=0,r=e.length;n<r;n++)if(t(e[n],n)){e.splice(n,1);break}break;case"object":for(var n in e)if(t(e[n],n)){delete e[n];break}}}},{"yavi/lib/is":17}]},{},[2]);